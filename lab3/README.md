# Лабораторная работа №3

## Задание
 Сложный сайт. Необходимо применить ajax. Сервис видеокодирования. Необходимо написать сайт, который поддерживает регистрацию и логин, а также загрузку видеозаписей для перекодирования в другой формат (на ваш выбор), по готовности на странице появляется статус-сообщение и возможность загрузить результат перекодирования. Перекодирование можно сделать командой ffmpeg

## Решение
Проект разбит на 2 папки:

- `client` - Фронтенд для работы с сервером
- `server` - http-server

### Stack
- Front - [React](https://react.dev/)
- Backend - node.js + nest.js + prisma
- Обработка изображений - [ffmpeg](https://ffmpeg.org/)
- База данных - sqlite

### Как работает
Клиент устанавливает websocket соединение с сервером, после загрузки видео на сервер начинается обработка, и отсылаются сообщения на клиент о статусе обработки

События
- processing - сервер обрабатывает видео, показывается лоадер
- completed - сервер закончил обработку и присылает ссылку на скачивание, показываем экран успеха и кнопку "Скачать"


### Getting Started
Для локального запуска необходимо установить [node](https://nodejs.org/en)

#### Frontend
```bash
cd client
npm install
npm run dev
```
сайт запущен на http://locahost:5137

#### Server
```bash
cd server
npm install
npx prisma migrate dev --name init
npm run start
```

сервер запущен на http://locahost:3000

### Auth
В проекте используется jwt авторизация 

### Тестирование
Были написаны e2e тесты для клиента на Playwright для сценариев регистрации и конвертации